<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>MonitIT</title>
    <base href="/">

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="text/javascript">
      $(function() {
        var conn;
        var msg = $("#msg");
        var log = $("#log");
        function appendLog(msg) {
          var d = log[0]
          var doScroll = d.scrollTop == d.scrollHeight - d.clientHeight;
          msg.appendTo(log)
          if (doScroll) {
            d.scrollTop = d.scrollHeight - d.clientHeight;
          }
        }
        $("#form").submit(function() {
          if (!conn) {
            return false;
          }
          if (!msg.val()) {
            return false;
          }
          conn.send(msg.val());
          msg.val("");
          return false
        });
        if (window["WebSocket"]) {
          conn = new WebSocket("ws://localhost:8080/ws");
          conn.onclose = function(evt) {
            appendLog($("<div><b>Connection closed.</b></div>"))
          }
          conn.onmessage = function(evt) {
            appendLog($("<pre/>").text(evt.data))
          }
        } else {
          appendLog($("<div><b>Your browser does not support WebSockets.</b></div>"))
        }
      });
    </script>
  </head>
  <body>
    <app-root></app-root>
  </body>
</html>
